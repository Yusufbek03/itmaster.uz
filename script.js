const translations = {
    ru: {
        "nav-services": "–£—Å–ª—É–≥–∏",
        "nav-pricing": "–¶–µ–Ω—ã",
        "nav-contact": "–ö–æ–Ω—Ç–∞–∫—Ç—ã",
        "nav-call": "–ü–æ–∑–≤–æ–Ω–∏—Ç—å",
        "hero-title": '–†–µ–º–æ–Ω—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ <span class="highlight">–±—ã—Å—Ç—Ä–æ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ</span>',
        "hero-subtitle": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ –∏ –Ω–æ—É—Ç–±—É–∫–æ–≤ –¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü –∏ –±–∏–∑–Ω–µ—Å–∞. –í—ã–µ–∑–¥ –º–∞—Å—Ç–µ—Ä–∞ –Ω–∞ –¥–æ–º –∏–ª–∏ –≤ –æ—Ñ–∏—Å.",
        "hero-cta-order": "–ó–∞–∫–∞–∑–∞—Ç—å —Ä–µ–º–æ–Ω—Ç",
        "hero-cta-services": "–ù–∞—à–∏ —É—Å–ª—É–≥–∏",
        "benefits-title": '<span class="highlight">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</span> –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞',
        "benefits-1-h": "–ë—ã—Å—Ç—Ä—ã–π —Ä–µ–º–æ–Ω—Ç",
        "benefits-1-p": "–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–µ–º–æ–Ω—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞ 1-2 —á–∞—Å–∞. –°—Ä–æ—á–Ω—ã–π —Ä–µ–º–æ–Ω—Ç –≤ –¥–µ–Ω—å –æ–±—Ä–∞—â–µ–Ω–∏—è.",
        "benefits-2-h": "–ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞",
        "benefits-2-p": "–î–∞–µ–º –≥–∞—Ä–∞–Ω—Ç–∏—é –∑–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.",
        "benefits-3-h": "–í—ã–µ–∑–¥ –º–∞—Å—Ç–µ—Ä–∞",
        "benefits-3-p": "–ú–∞—Å—Ç–µ—Ä –ø—Ä–∏–µ–¥–µ—Ç –∫ –≤–∞–º –¥–æ–º–æ–π –∏–ª–∏ –≤ –æ—Ñ–∏—Å –≤ —É–¥–æ–±–Ω–æ–µ –¥–ª—è –≤–∞—Å –≤—Ä–µ–º—è.",
        "services-title": "–£—Å–ª—É–≥–∏ –∏ —Ü–µ–Ω—ã",
        "services-subtitle": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏. –†–∞–±–æ—Ç–∞–µ–º —Å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ –ª–∏—Ü–∞–º–∏ –∏ –±–∏–∑–Ω–µ—Å–æ–º.",
        "card-badge-popular": "–ü–æ–ø—É–ª—è—Ä–Ω–æ",
        "card-badge-complex": "–ö–æ–º–ø–ª–µ–∫—Å",
        "card-badge-fast": "–ë—ã—Å—Ç—Ä–æ",
        "card-badge-top": "–¢–æ–ø",
        "card-badge-top-short": "–¢–û–ü",
        "card-badge-service": "–°–µ—Ä–≤–∏—Å",
        "card-tag-setup": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞",
        "card-tag-setup-label": "–ù–∞—Å—Ç—Ä–æ–π–∫–∞",
        "card-tag-protection": "–ó–∞—â–∏—Ç–∞",
        "card-tag-optimization": "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è",
        "card-tag-connection": "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ",
        "card-tag-diagnostic": "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞",
        "card-meta-warranty": "–ì–∞—Ä–∞–Ω—Ç–∏—è",
        "card-meta-antivirus": "–ê–Ω—Ç–∏–≤–∏—Ä—É—Å",
        "card-meta-speed": "+50% —Å–∫–æ—Ä–æ—Å—Ç–∏",
        "card-meta-analysis": "–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑",
        "card-price-from": "–æ—Ç",
        "card-price-currency": "—Ç—ã—Å —Å—É–º",
        "card-btn-details": "–ü–æ–¥—Ä–æ–±–Ω–µ–µ",
        "service-windows-title": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Windows + –¥—Ä–∞–π–≤–µ—Ä—ã",
        "service-setup-title": "–ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ü–ö",
        "service-virus-title": "–£–¥–∞–ª–µ–Ω–∏–µ –≤–∏—Ä—É—Å–æ–≤",
        "service-speed-title": "–£—Å–∫–æ—Ä–µ–Ω–∏–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞",
        "service-printer-title": "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–Ω—Ç–µ—Ä–∞ –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞",
        "service-diagnostic-title": "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞",
        "contact-title": "–û—Å—Ç–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É",
        "contact-subtitle": "–ú—ã –ø–µ—Ä–µ–∑–≤–æ–Ω–∏–º –≤–∞–º –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç",
        "phone-label": "–¢–µ–ª–µ—Ñ–æ–Ω",
        "address-label": "–ê–¥—Ä–µ—Å",
        "address-value": "–≥. –ù–∞–º–∞–Ω–≥–∞–Ω, —É–ª. –®–∏—Ñ–æ–∫–æ—Ä 10",
        "form-name-placeholder": "–í–∞—à–µ –∏–º—è",
        "form-phone-placeholder": "–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞",
        "form-select-default": "–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É",
        "form-message-placeholder": "–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É",
        "form-description-placeholder": "–û–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å...",
        "form-submit": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É",
        "form-success": "–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!",
        "footer-desc": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ —Å 2017 –≥–æ–¥–∞.",
        "footer-services": "–£—Å–ª—É–≥–∏",
        "footer-contacts": "–ö–æ–Ω—Ç–∞–∫—Ç—ã",
        "footer-copy": "&copy; 2025 IT –ú–∞—Å—Ç–µ—Ä. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.",
        "modal-how": "–ö–∞–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ä–∞–±–æ—Ç–∞:",
        "modal-warranty": "–ì–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞ —Ä–∞–±–æ—Ç—É",
        "modal-btn-request": "–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É",
        "steps": {
            windows: ["–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è", "–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ", "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Windows", "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥—Ä–∞–π–≤–µ—Ä–æ–≤", "–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã", "–ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã", "–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏"],
            setup: ["–ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã", "–£–¥–∞–ª–µ–Ω–∏–µ –º—É—Å–æ—Ä–∞", "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏", "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã", "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–û", "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞—â–∏—Ç—ã", "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"],
            virus: ["–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ", "–ü–æ–∏—Å–∫ —É–≥—Ä–æ–∑", "–£–¥–∞–ª–µ–Ω–∏–µ –≤–∏—Ä—É—Å–æ–≤", "–û—á–∏—Å—Ç–∫–∞ —Ä–µ–µ—Å—Ç—Ä–∞", "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å–∞", "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞—â–∏—Ç—ã", "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"],
            speed: ["–û—Ü–µ–Ω–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏", "–û—á–∏—Å—Ç–∫–∞ –¥–∏—Å–∫–∞", "–î–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è", "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–ª—É–∂–±", "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSD", "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–æ–≤", "–¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"],
            printer: ["–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ", "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥—Ä–∞–π–≤–µ—Ä–æ–≤", "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏", "–¢–µ—Å—Ç–æ–≤–∞—è –ø–µ—á–∞—Ç—å", "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Wi-Fi", "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏", "–ò–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂"],
            diagnostic: ["–û—Å–º–æ—Ç—Ä –∂–µ–ª–µ–∑–∞", "–¢–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤", "–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–∞", "–ê–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–≥—Ä–µ–≤–∞", "–¢–µ—Å—Ç –ø–∞–º—è—Ç–∏", "–û—Ç—á—ë—Ç", "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–º–æ–Ω—Ç—É"]
        }
    },
    uz: {
        "nav-services": "Xizmatlar",
        "nav-pricing": "Narxlar",
        "nav-contact": "Kontaktlar",
        "nav-call": "Qo'ng'iroq",
        "hero-title": 'Kompyuterlarni <span class="highlight">tez va sifatli</span> ta\'mirlash',
        "hero-subtitle": "Jismoniy va yuridik shaxslar uchun professional kompyuter xizmatlari. Uyga va ofisga borish imkoniyati.",
        "hero-cta-order": "Ta'mirlashga buyurtma",
        "hero-cta-services": "Xizmatlarimiz",
        "benefits-title": 'Servisimiz <span class="highlight">afzalliklari</span>',
        "benefits-1-h": "Tezkor ta'mirlash",
        "benefits-1-p": "Aksariyat ishlarni 1-2 soatda bajaramiz. Murojaat kuni ta'mirlash imkoniyati.",
        "benefits-2-h": "Sifat kafolati",
        "benefits-2-p": "Har bir bosqichda mas'uliyat va sifatli ish uchun kafolat beramiz.",
        "benefits-3-h": "Uyga borish",
        "benefits-3-p": "Usta sizga qulay vaqtda uyga yoki ofisga yetib boradi.",
        "services-title": "Xizmatlar va narxlar",
        "services-subtitle": "Professional kompyuter xizmatlari. Jismoniy va yuridik shaxslar bilan ishlaymiz.",
        "card-badge-popular": "Ommabop",
        "card-badge-complex": "Kompleks",
        "card-badge-fast": "Tezkor",
        "card-badge-top": "Top",
        "card-badge-top-short": "TOP",
        "card-badge-service": "Servis",
        "card-tag-setup": "O'rnatish",
        "card-tag-setup-label": "Sozlash",
        "card-tag-protection": "Himoya",
        "card-tag-optimization": "Tezlashtirish",
        "card-tag-connection": "Ulash",
        "card-tag-diagnostic": "Diagnostika",
        "card-meta-warranty": "Kafolat",
        "card-meta-antivirus": "Antivirus",
        "card-meta-speed": "+50% tezlik",
        "card-meta-analysis": "To'liq tahlil",
        "card-price-from": "dan",
        "card-price-currency": "ming so'm",
        "card-btn-details": "Batafsil",
        "service-windows-title": "Windows o'rnatish + drayverlar",
        "service-setup-title": "To'liq sozlash (Kompleks)",
        "service-virus-title": "Viruslarni tozalash",
        "service-speed-title": "Kompyuterni tezlashtirish",
        "service-printer-title": "Printer va internet sozlash",
        "service-diagnostic-title": "Kompyuter diagnostikasi",
        "contact-title": "Ariza qoldiring",
        "contact-subtitle": "Biz 15 daqiqa ichida qo'ng'iroq qilamiz",
        "phone-label": "Telefon",
        "address-label": "Manzil",
        "address-value": "Namangan sh., Shifokor ko'ch. 10",
        "form-name-placeholder": "Ismingiz",
        "form-phone-placeholder": "Telefon raqamingiz",
        "form-select-default": "Xizmatni tanlang",
        "form-message-placeholder": "Muammoni tavsiflang",
        "form-description-placeholder": "Nimalar qilish kerakligini batafsil yozing...",
        "form-submit": "Ariza yuborish",
        "form-success": "Arizangiz qabul qilindi!",
        "footer-desc": "2017 yildan beri professional kompyuter ta'mirlash.",
        "footer-services": "Xizmatlar",
        "footer-contacts": "Kontaktlar",
        "footer-copy": "&copy; 2025 IT Master. Barcha huquqlar himoyalangan.",
        "modal-how": "Ish bosqichlari:",
        "modal-warranty": "Ishga kafolat beriladi",
        "modal-btn-request": "Ariza qoldirish",
        "steps": {
            windows: ["Holatni tekshirish", "Ma'lumotlarni nusxalash", "Windows o'rnatish", "Drayverlarni o'rnatish", "Tizimni faollashtirish", "Kerakli dasturlar", "Sinovdan o'tkazish"],
            setup: ["Tahlil qilish", "Keraksiz fayllarni o'chirish", "Avtoyuklanishni sozlash", "Tizimni optimallashtirish", "Dasturlar o'rnatish", "Himoyani sozlash", "Yakuniy sinov"],
            virus: ["Skanerlash", "Tahdidlarni topish", "Viruslarni o'chirish", "Reestrni tozalash", "Antivirus o'rnatish", "Himoyani sozlash", "Tavsiyalar berish"],
            speed: ["Tezlikni baholash", "Diskni tozalash", "Defragmentatsiya", "Xizmatlarni o'chirish", "SSD sozlash", "Drayverlarni yangilash", "Tezlikni sinash"],
            printer: ["Ulanishni tekshirish", "Drayverlar o'rnatish", "Tarmoqni sozlash", "Sinov tariqasida chop etish", "Wi-Fi sozlash", "Aloqani tekshirish", "Ko'rsatmalar berish"],
            diagnostic: ["Uskunalarni ko'zdan kechirish", "Komponentlar testi", "Diskni tekshirish", "Qizib ketish tahlili", "Xotira testi", "Hisobot tayyorlash", "Tavsiyalar"]
        }
    }
};

let currentLang = 'ru';

function setLanguage(lang) {
    currentLang = lang;
    
    // Update active button state
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
    });

    // Update terminology texts
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (translations[lang][key]) {
            el.innerHTML = translations[lang][key];
        }
    });

    // Update placeholders
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.dataset.i18nPlaceholder;
        if (translations[lang][key]) {
            el.placeholder = translations[lang][key];
        }
    });

    // Close mobile menu if open
    if (navLinks.classList.contains('active')) {
        navLinks.classList.remove('active');
        const icon = mobileMenuBtn.querySelector('i');
        icon.classList.add('fa-bars');
        icon.classList.remove('fa-times');
    }
}

// Language switch listeners
document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        setLanguage(btn.dataset.lang);
    });
});

// Smooth scroll for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Hide header when scrolling down
const header = document.querySelector('.header');

window.addEventListener('scroll', () => {
    if (window.scrollY > 100) {
        header.classList.add('hidden');
    } else {
        header.classList.remove('hidden');
    }
});

// Mobile menu toggle
const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
const navLinks = document.querySelector('.nav-links');

if (mobileMenuBtn) {
    mobileMenuBtn.addEventListener('click', () => {
        navLinks.classList.toggle('active');
        const icon = mobileMenuBtn.querySelector('i');
        icon.classList.toggle('fa-bars');
        icon.classList.toggle('fa-times');
    });
}

// Telegram Integration Settings
const TELEGRAM_TOKEN = '7854743748:AAFtmURxjmKjC73X1Rm7DOGRH5TZpLAyOwk';
const TELEGRAM_CHAT_ID = '8154497279';

async function sendTelegramNotification(data) {
    const text = `
üöÄ *–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞ IT –ú–∞—Å—Ç–µ—Ä!*
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ *–ò–º—è:* ${data.name}
üìû *–¢–µ–ª–µ—Ñ–æ–Ω:* ${data.phone}
üõ† *–£—Å–ª—É–≥–∞:* ${data.service}
üìù *–°–æ–æ–±—â–µ–Ω–∏–µ:* ${data.message || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è'}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üåê *–Ø–∑—ã–∫ —Å–∞–π—Ç–∞:* ${currentLang.toUpperCase()}
    `;

    try {
        const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                chat_id: TELEGRAM_CHAT_ID,
                text: text,
                parse_mode: 'Markdown'
            })
        });
        
        const result = await response.json();
        if (!result.ok) {
            console.error('Telegram API Error:', result);
        } else {
            console.log('Notification sent successfully!');
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ Telegram:', error);
    }
}

// Form submission
const contactForm = document.getElementById('contactForm');

if (contactForm) {
    contactForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const name = document.getElementById('name').value;
        const phone = document.getElementById('phone').value;
        const serviceCode = document.getElementById('service').value;
        const message = document.getElementById('message').value;
        
        // –ü–æ–ª—É—á–∞–µ–º —á–∏—Ç–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
        const serviceName = translations['ru'][`service-${serviceCode}-title`] || serviceCode;

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–µ
        const btn = this.querySelector('button[type="submit"]');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –û—Ç–ø—Ä–∞–≤–∫–∞...';
        
        // Send notification to Telegram
        await sendTelegramNotification({ name, phone, service: serviceName, message });

        // Show success message
        btn.innerHTML = `<i class="fas fa-check"></i> ${translations[currentLang]['form-success']}`;
        btn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
        
        // Reset form
        this.reset();
        
        // Reset button after 3 seconds
        setTimeout(() => {
            btn.innerHTML = originalText;
            btn.style.background = '';
        }, 3000);
    });
}

// Apple-style scroll animations
const appleObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('visible');
        }
    });
}, {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
});

// Observe all animated elements
document.querySelectorAll('.fade-in, .fade-in-left, .fade-in-right, .scale-in').forEach(el => {
    appleObserver.observe(el);
});

// Service Modal Functionality
const serviceModal = document.getElementById('serviceModal');
const requestPopup = document.getElementById('requestPopup');
let currentService = '';

// Service icons for modal
const serviceIcons = {
    windows: '<i class="fab fa-windows"></i>',
    setup: '<i class="fas fa-cogs"></i>',
    virus: '<i class="fas fa-virus-slash"></i>',
    speed: '<i class="fas fa-tachometer-alt"></i>',
    printer: '<i class="fas fa-print"></i>',
    diagnostic: '<i class="fas fa-stethoscope"></i>'
};

// Open service modal
document.querySelectorAll('.btn-details').forEach(btn => {
    btn.addEventListener('click', function(e) {
        e.stopPropagation();
        const card = this.closest('.service-card');
        const service = card.dataset.service;
        
        // Get translated content
        const title = translations[currentLang][`service-${service}-title`];
        const steps = translations[currentLang].steps[service];
        const price = card.querySelector('.price').innerText;
        
        currentService = service;
        
        // Fill modal content
        document.getElementById('modalIcon').innerHTML = serviceIcons[service];
        document.getElementById('modalTitle').textContent = title;
        document.getElementById('modalPrice').textContent = price;
        
        // Create steps
        const stepsContainer = document.getElementById('modalSteps');
        stepsContainer.innerHTML = steps.map((step, index) => `
            <div class="step">
                <span class="step-number">${index + 1}</span>
                <span class="step-text">${step}</span>
            </div>
        `).join('');
        
        // Show modal
        serviceModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    });
});

// Close modal
document.querySelector('.modal-close').addEventListener('click', () => {
    serviceModal.classList.remove('active');
    document.body.style.overflow = '';
});

document.querySelector('.modal-overlay').addEventListener('click', () => {
    serviceModal.classList.remove('active');
    document.body.style.overflow = '';
});

// Open request popup from modal
document.getElementById('openRequestBtn').addEventListener('click', () => {
    serviceModal.classList.remove('active');
    requestPopup.classList.add('active');
    
    // Pre-select service in popup
    const popupServiceSelect = document.getElementById('popupService');
    popupServiceSelect.value = currentService;
});

// Close popup
document.querySelector('.popup-close').addEventListener('click', () => {
    requestPopup.classList.remove('active');
    document.body.style.overflow = '';
});

document.querySelector('.popup-overlay').addEventListener('click', () => {
    requestPopup.classList.remove('active');
    document.body.style.overflow = '';
});

// Popup form submission
document.getElementById('popupForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const name = document.getElementById('popupName').value;
    const phone = document.getElementById('popupPhone').value;
    const service = document.getElementById('popupService').value;
    const description = document.getElementById('popupDescription').value;
    
    // Send to Telegram
    await sendTelegramNotification({ 
        name, 
        phone, 
        service: translations['ru'][`service-${service}-title`] || service, 
        message: description 
    });

    // Show success
    const btn = this.querySelector('button[type="submit"]');
    btn.innerHTML = `<i class="fas fa-check"></i> ${translations[currentLang]['form-success']}`;
    btn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
    
    // Reset and close
    setTimeout(() => {
        this.reset();
        const submitText = translations[currentLang]['form-submit'];
        btn.innerHTML = `<i class="fas fa-check"></i> ${submitText}`;
        btn.style.background = '';
        requestPopup.classList.remove('active');
        document.body.style.overflow = '';
    }, 2000);
});

// Phone formatting for popup
const popupPhone = document.getElementById('popupPhone');
if (popupPhone) {
    popupPhone.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length > 0) {
            if (value.startsWith('998')) value = value.substring(3);
            let formatted = '+998';
            if (value.length > 0) formatted += ' ' + value.substring(0, 2);
            if (value.length > 2) formatted += ' ' + value.substring(2, 5);
            if (value.length > 5) formatted += ' ' + value.substring(5, 7);
            if (value.length > 7) formatted += ' ' + value.substring(7, 9);
            e.target.value = formatted;
        }
    });
}

// Phone number formatting
const phoneInput = document.getElementById('phone');

if (phoneInput) {
    phoneInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        
        if (value.length > 0) {
            if (value.startsWith('998')) {
                value = value.substring(3);
            }
            
            let formatted = '+998';
            if (value.length > 0) {
                formatted += ' ' + value.substring(0, 2);
            }
            if (value.length > 2) {
                formatted += ' ' + value.substring(2, 5);
            }
            if (value.length > 5) {
                formatted += ' ' + value.substring(5, 7);
            }
            if (value.length > 7) {
                formatted += ' ' + value.substring(7, 9);
            }
            
            e.target.value = formatted;
        }
    });
}

// Stats counter animation
const statsObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const statNumbers = entry.target.querySelectorAll('.stat-number');
            statNumbers.forEach(stat => {
                const text = stat.textContent;
                if (text.includes('+')) {
                    animateCounter(stat, parseInt(text), '+');
                } else if (text.includes('/')) {
                    // Skip animation for 24/7
                } else {
                    animateCounter(stat, parseInt(text));
                }
            });
            statsObserver.unobserve(entry.target);
        }
    });
}, { threshold: 0.5 });

const heroStats = document.querySelector('.hero-stats');
if (heroStats) {
    statsObserver.observe(heroStats);
}

function animateCounter(element, target, suffix = '') {
    let current = 0;
    const increment = target / 50;
    const duration = 2000;
    const step = duration / 50;
    
    const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
            current = target;
            clearInterval(timer);
        }
        element.textContent = Math.floor(current) + suffix;
    }, step);
}

// Add ripple effect to buttons
document.querySelectorAll('.btn').forEach(button => {
    button.addEventListener('click', function(e) {
        const ripple = document.createElement('span');
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;
        
        ripple.style.cssText = `
            position: absolute;
            width: ${size}px;
            height: ${size}px;
            left: ${x}px;
            top: ${y}px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s ease-out;
            pointer-events: none;
        `;
        
        this.style.position = 'relative';
        this.style.overflow = 'hidden';
        this.appendChild(ripple);
        
        setTimeout(() => ripple.remove(), 600);
    });
});

// Add ripple animation keyframes
const rippleStyle = document.createElement('style');
rippleStyle.textContent = `
    @keyframes ripple {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
`;
document.head.appendChild(rippleStyle);

console.log('IT –ú–∞—Å—Ç–µ—Ä - —Å–∞–π—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
